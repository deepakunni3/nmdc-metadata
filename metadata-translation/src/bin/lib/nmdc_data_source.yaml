classes:
  
  gold_study:
    type: study
    constructor:
      id: gold_id
      name: study_name
      description: description
    attributes:
      - principal_investigator_name
      - ecosystem
      - ecosystem_category
      - ecosystem_type
      - ecosystem_subtype
      - specific_ecosystem
      - doi
  
  gold_omics_processing:
    type: omics processing
    constructor:
      id: gold_id
      name: project_name
      description: description
    attributes:
      - {part_of: study_gold_id}
      - {has_output: output_file_ids}
      - add_date 
      - mod_date
      - completion_date 
      - ncbi_project_name 
      - omics_type 
      - principal_investigator_name
      - processing_institution
      - {has_input: biosample_gold_id}
            
  emsl_omics_processing:
    type: omics processing
    constructor:
      id: dataset_id
      name: dataset_name
      description: dataset_type_description
    attributes:
      - {part_of: gold_study_id}
      - {has_output: data_object_id}
      - {has_input: biosample_gold_ids}
      
  emsl_data_object:
    type: data object
    constructor:
      id: data_object_id
      name: data_object_name
      description: dataset_type_description
    attributes:
      - file_size_bytes
  
  jgi_data_object:
    type: data object
    constructor:
      id: file_id
      name: file_name
      description: file_type_description
    attributes:
      - file_size_bytes

  gold_biosample:
    type: biosample
    constructor:
      id: 'gold_id'
      name: 'biosample_name'
      description: 'description'
      env_broad_scale: [{has_raw_value: 'env_broad_scale'}, 'ControlledTermValue']
      env_local_scale: [{has_raw_value: 'env_local_scale'}, ControlledTermValue]
      env_medium: [{has_raw_value: 'env_medium'}, 'ControlledTermValue']
      lat_lon: [{latitude: 'latitude', longitude: 'longitude', has_raw_value: 'lat_lon'}, 'GeolocationValue']
    attributes:
      - add_date
      - mod_date
      - collection_date
      - ecosystem
      - ecosystem_dcategory
      - ecosystem_type
      - ecosystem_subtype
      - specific_ecosystem
      - habitat
      - location
      - community
      - ncbi_taxonomy_name
      - geographic_location
      - sample_collection_site
      - identifier
      - host_name
      - depth
      - subsurface_depth
      - altitude
      - proport_woa_temperature
      - biogas_temperature
      - growth_temperature
      - water_samp_store_temp
      - biogas_retention_time
      - salinity
      - pressure
      - ph
      - chlorophyll_concentration
      - nitrate_concentration
      - oxygen_concentration
      - salinity_concentration
      - sample_volume
      - sample_weight_dna_ext
      - sampling_strategy
      - soil_link_climate_info
      - soil_misc_param
      - soil_misc_paramÂ 
      - soil_water_content
      - soluble_iron_micromol
      - subsurface_depth2
      - tot_nitrogen
      - tot_org_carbon
      - water_alkalinity
      - water_alkalinity_method
      - water_alkyl_diethers
      - water_aminopept_act
      - water_ammonium
      - water_bacterial_carbon_prod
      - water_bishomohopanol
      - water_bromide
      - water_calcium
      - water_carbon_nitrog_ratio
      - water_chem_administration
      - water_chloride
      - water_density
      - water_diether_lipids
      - water_diss_carbon_dioxide
      - water_diss_hydrogen
      - water_diss_inorg_carbon
      - water_diss_inorg_phosphorus
      - water_diss_org_carbon
      - water_diss_org_nitrogen
      - water_glucosidase_activity
      - water_magnesium
      - water_mean_frict_vel
      - water_mean_peak_frict_vel
      - water_misc_parameter
      - water_n_alkanes
      - water_nitrite
      - water_org_matter
      - water_org_nitrogen
      - water_organism_count
      - water_oxy_stat_sample
      - water_part_org_carbon
      - water_perturbation
      - water_petroleum_hydrocarbon
      - water_phaeopigments
      - water_phosplipid_fatt_acid
      - water_potassium
      - water_redox_potential
      - water_samp_store_dur
      - water_samp_store_loc
      - water_size_frac_low
      - water_size_frac_up
      - water_sodium
      - water_sulfate
      - water_sulfide
      - water_tidal_stage
      - water_tot_depth_water_col
      - water_tot_diss_nitro
      - water_tot_phosphorus
      - water_turbidity
      # - {part_of: project_gold_ids}

  
data_sources:

  study_table:
    id_key: study_id
    data_source:
      file_name: "export.sql/STUDY_DATA_TABLE.dsv"
      file_type: tsv
      file_archive_name: "../data/nmdc-version5.zip"
    filters:
      - field: gold_id
        values:
          - Gs0110115
          - Gs0110132
          - Gs0112340
          - Gs0114675
          - Gs0128849
          - Gs0130354
          - Gs0114298
          - Gs0114663
          - Gs0120351
          - Gs0134277
          - Gs0133461
          - Gs0135152
          - Gs0135149
      - {field: active, values: ['Yes']}
              
  contact_table:
    id_key: contact_id
    data_source:
      file_name: "export.sql/CONTACT_DATA_TABLE.dsv"
      file_type: tsv
      file_archive_name: "../data/nmdc-version5.zip"
    rename_slots:
      - old_name: name
        new_name: principal_investigator_name
            
  proposals_table:
    id_key: jgi_id
    data_source:
      file_name: "../data/JGI-EMSL-FICUS-proposals.fnl.tsv"
      file_type: tsv
 
  project_table:
    id_key: project_id
    data_source:
      file_name: "export.sql/PROJECT_DATA_TABLE.dsv"
      file_type: tsv
      file_archive_name: "../data/nmdc-version5.zip"
    rename_slots:
      - old_name: sequencing_strategy
        new_name: omics_type
    filters:              
      - {field: active, values: ['Yes']}

  project_biosample_table:
    data_source:
      file_name: "export.sql/PROJECT_BIOSAMPLE_DATA_TABLE.dsv"
      file_type: tsv
      file_archive_name: "../data/nmdc-version5.zip"
    
  biosample_table:
    id_key: biosample_id
    data_source:
      file_name: "export.sql/BIOSAMPLE_DATA_TABLE.dsv" 
      file_type: tsv
      file_archive_name: "../data/nmdc-version5.zip"
    filters:              
      - {field: active, values: ['Yes']}
    rename_slots:
      - old_name: envo_biome_id
        new_name: env_broad_scale
      - old_name: envo_feature_id
        new_name: env_local_scale
      - old_name: envo_material_id
        new_name: env_medium
    subset_cols:
      - biosample_id
      - gold_id
      - biosample_name
      - description
      - add_date
      - mod_date
      - sample_collection_year
      - sample_collection_month
      - sample_collection_day
      - sample_collection_hour
      - sample_collection_minute
      - latitude
      - longitude
      - ecosystem
      - ecosystem_category
      - ecosystem_type
      - ecosystem_subtype
      - specific_ecosystem
      - env_broad_scale
      - env_local_scale
      - env_medium
      - habitat
      - location
      - community
      - ncbi_taxonomy_name
      - geographic_location
      - sample_collection_site
      - identifier
      - host_name
      - depth
      - subsurface_depth
      - altitude
      - proport_woa_temperature
      - biogas_temperature
      - growth_temperature
      - water_samp_store_temp
      - biogas_retention_time
      - salinity
      - pressure
      - ph
      - chlorophyll_concentration
      - nitrate_concentration
      - oxygen_concentration
      - salinity_concentration
      - sample_volume
      - sample_weight_dna_ext
      - sampling_strategy
      - soil_link_climate_info
      - soil_misc_param
      - soil_water_content
      - soluble_iron_micromol
      - subsurface_depth2
      - tot_nitrogen
      - tot_org_carbon
      - water_alkalinity
      - water_alkalinity_method
      - water_alkyl_diethers
      - water_aminopept_act
      - water_ammonium
      - water_bacterial_carbon_prod
      - water_bishomohopanol
      - water_bromide
      - water_calcium
      - water_carbon_nitrog_ratio
      - water_chem_administration
      - water_chloride
      - water_density
      - water_diether_lipids
      - water_diss_carbon_dioxide
      - water_diss_hydrogen
      - water_diss_inorg_carbon
      - water_diss_inorg_phosphorus
      - water_diss_org_carbon
      - water_diss_org_nitrogen
      - water_glucosidase_activity
      - water_magnesium
      - water_mean_frict_vel
      - water_mean_peak_frict_vel
      - water_misc_parameter
      - water_n_alkanes
      - water_nitrite
      - water_org_matter
      - water_org_nitrogen
      - water_organism_count
      - water_oxy_stat_sample
      - water_part_org_carbon
      - water_perturbation
      - water_petroleum_hydrocarbon
      - water_phaeopigments
      - water_phosplipid_fatt_acid
      - water_potassium
      - water_redox_potential
      - water_samp_store_dur
      - water_samp_store_loc
      - water_size_frac_low
      - water_size_frac_up
      - water_sodium
      - water_sulfate
      - water_sulfide
      - water_tidal_stage
      - water_tot_depth_water_col
      - water_tot_diss_nitro
      - water_tot_phosphorus
      - water_turbidity

  # ficus_faa_table:
  #   id_key: file_id
  #   data_source:
  #     file_name: "../data/ficus_project_faa.tsv"
  #     file_type: tsv      
  #   append_columns:
  #     - name: processing_institution
  #       value: Environmental Molecular Sciences Lab
  #   rename_slots:
  #     - old_name: file_size
  #       new_name: file_size_bytes

  # ficus_fna_table:
  #   id_key: file_id
  #   data_source:
  #     file_name: "../data/ficus_project_fna.tsv"
  #     file_type: tsv 
  #   append_columns:
  #     - name: processing_institution
  #       value: Environmental Molecular Sciences Lab
  #   rename_slots:
  #     - old_name: file_size
  #       new_name: file_size_bytes

  ficus_fastq_table:
    id_key: file_id
    data_source:
      file_name: "../data/ficus_project_fastq.tsv"
      file_type: tsv      
    append_columns:
      - name: processing_institution
        value: Environmental Molecular Sciences Lab
    rename_slots:
      - old_name: file_size
        new_name: file_size_bytes

  ficus_jgi_emsl:
    id_key: gold_study_id
    data_source:
      file_name: "../data/FICUS - JGI-EMSL Proposal - Gold Study - ID mapping and PI.xlsx"
      file_type: excel

  ficus_emsl:
    id_key: dataset_id
    data_source: 
      file_name: "../data/EMSL_FICUS_project_process_data_export.xlsx"
      file_type: multi-sheet-excel
    rename_slots:
      - old_name: experimental_data_type
        new_name: omics_type
      - old_name: dataset_file_size_bytes
        new_name: file_size_bytes
    append_columns:
      - name: processing_institution
        value: Environmental Molecular Sciences Lab
  
  ficus_emsl_biosample:
    # id_key: dataset_id # since the key is the same as ficus_emsl don't use it
    data_source: 
      file_name: "../data/EMSL_Hess_Stegen_Blanchard_DatasetToMetagenomeMapping.tsv"
      file_type: tsv
    rename_slots:
      - old_name: gold_biosample_id
        new_name: biosample_gold_id