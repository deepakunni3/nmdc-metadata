classes:
  
  study:
    id_key: gold_id
    name_key: study_name
    description_key: description
    schema_source: "../../schema/nmdc.yaml"
    data_sources:
      - study_table
      - contact_table
      - proposals_table
            
  omics processing:
    id_key: dataset_id
    name_key: dataset_name
    description_key: dataset_type_description
    part_of_key: gold_study_id
    has_output_key: data_object_id
    schema_source: "../../schema/nmdc.yaml"
    data_sources:
      - project_table
      - study_table
      - contact_table

        
  biosample:
    id_key: gold_id
    name_key: biosample_name
    description_key: description
    part_of_key: project_gold_id
    schema_slots: "../../schema/nmdc.yaml"
    data_sources:
      gold:
        - biosample_table
        - project_table
        - project_biosample_table

        
  data object:
    id_key: data_object_id
    name_key: data_object_name
    schema_source: "../../schema/nmdc.yaml"
    data_sources:
      - ficus_faa_table
      - ficus_fna_table
      - ficus_fastq_table
    

data_sources:

  study_table:
    id_key: study_id
    data_source:
      file_name: "export.sql/STUDY_DATA_TABLE.dsv"
      file_type: tsv
      file_archive_name: "../src/data/nmdc-version5.zip"
    data_slots:
      - contact_id
    filters:
      - field: gold_id
        values:
          - Gs0110115
          - Gs0110132
          - Gs0112340
          - Gs0114675
          - Gs0128849
          - Gs0130354
          - Gs0114298
          - Gs0114663
          - Gs0120351
          - Gs0134277
          - Gs0133461
          - Gs0135152
          - Gs0135149
      - {field: active, values: ['Yes']}
              
  contact_table:
    id_key: contact_id
    data_source:
      file_name: "export.sql/CONTACT_DATA_TABLE.dsv"
      file_type: tsv
      file_archive_name: "../src/data/nmdc-version5.zip"
    data_slots:
      - name
      - contact_id
    rename_slots:
      - old_name: name
        new_name: principal_investigator_name
            
  proposals_table:
    id_key: jgi_id
    data_source:
      file_name: "../src/data/JGI-EMSL-FICUS-proposals.fnl.tsv"
      file_type: tsv
      data_slots:
        - doi
        - gold_study

  project_table:
    id_key: project_id
    data_source:
      file_name: "export.sql/PROJECT_DATA_TABLE.dsv"
      file_type: tsv
      file_archive_name: "../src/data/nmdc-version5.zip"
    data_slots:
      - master_study_id
      - pi_id
    rename_slots:
      - old_name: sequencing_strategy
        new_name: omics_type
    filters:              
      - {field: active, values: ['Yes']}

  project_biosample_table:
    data_source:
      file_name: "export.sql/PROJECT_BIOSAMPLE_DATA_TABLE.dsv"
      file_type: tsv
      file_archive_name: "../src/data/nmdc-version5.zip"
    data_slots:
      - biosample_id
      - project_id
        
  biosample_table:
    id_key: biosample_id
    data_source:
      file_name: "export.sql/BIOSAMPLE_DATA_TABLE.dsv" 
      file_type: tsv
      file_archive_name: "../src/data/nmdc-version5.zip"
    filters:              
      - {field: active, values: ['Yes']}
    rename_slots:
      - old_name: envo_biome_id
        new_name: env_broad_scale
      - old_name: envo_feature_id
        new_name: env_local_scale
      - old_name: envo_material_id
        new_name: env_medium
    subset_cols:
      - biosample_id
      - gold_id
      - biosample_name
      - description
      - add_date
      - mod_date
      - sample_collection_year
      - sample_collection_month
      - sample_collection_day
      - sample_collection_hour
      - sample_collection_minute
      - latitude
      - longitude
      - ecosystem
      - ecosystem_category
      - ecosystem_type
      - ecosystem_subtype
      - specific_ecosystem
      - env_broad_scale
      - env_local_scale
      - env_medium
      - habitat
      - location
      - community
      - ncbi_taxonomy_name
      - geographic_location
      - sample_collection_site
      - identifier
      - host_name
      - depth
      - subsurface_depth
      - altitude
      - proport_woa_temperature
      - biogas_temperature
      - growth_temperature
      - water_samp_store_temp
      - biogas_retention_time
      - salinity
      - pressure
      - ph
      - chlorophyll_concentration
      - nitrate_concentration
      - oxygen_concentration
      - salinity_concentration
      - sample_volume
      - sample_weight_dna_ext
      - sampling_strategy
      - soil_link_climate_info
      - soil_misc_param
      - soil_water_content
      - soluble_iron_micromol
      - subsurface_depth2
      - tot_nitrogen
      - tot_org_carbon
      - water_alkalinity
      - water_alkalinity_method
      - water_alkyl_diethers
      - water_aminopept_act
      - water_ammonium
      - water_bacterial_carbon_prod
      - water_bishomohopanol
      - water_bromide
      - water_calcium
      - water_carbon_nitrog_ratio
      - water_chem_administration
      - water_chloride
      - water_density
      - water_diether_lipids
      - water_diss_carbon_dioxide
      - water_diss_hydrogen
      - water_diss_inorg_carbon
      - water_diss_inorg_phosphorus
      - water_diss_org_carbon
      - water_diss_org_nitrogen
      - water_glucosidase_activity
      - water_magnesium
      - water_mean_frict_vel
      - water_mean_peak_frict_vel
      - water_misc_parameter
      - water_n_alkanes
      - water_nitrite
      - water_org_matter
      - water_org_nitrogen
      - water_organism_count
      - water_oxy_stat_sample
      - water_part_org_carbon
      - water_perturbation
      - water_petroleum_hydrocarbon
      - water_phaeopigments
      - water_phosplipid_fatt_acid
      - water_potassium
      - water_redox_potential
      - water_samp_store_dur
      - water_samp_store_loc
      - water_size_frac_low
      - water_size_frac_up
      - water_sodium
      - water_sulfate
      - water_sulfide
      - water_tidal_stage
      - water_tot_depth_water_col
      - water_tot_diss_nitro
      - water_tot_phosphorus
      - water_turbidity

  ficus_faa_table:
    id_key: file_id
    data_source:
      file_name: "../src/data/ficus_project_faa.tsv"
      file_type: tsv      
    data_slots:
      - file_id
      - gold_project_id
      - file_type_description
      - file_size
    append_columns:
      - name: processing_institution
        value: Environmental Molecular Sciences Lab
    rename_slots:
      - old_name: file_size
        new_name: file_size_bytes

  ficus_fna_table:
    id_key: file_id
    data_source:
      file_name: "../src/data/ficus_project_fna.tsv"
      file_type: tsv      
    data_slots:
      - file_id
      - gold_project_id
      - file_type_description
      - file_size
    append_columns:
      - name: processing_institution
        value: Environmental Molecular Sciences Lab
    rename_slots:
      - old_name: file_size
        new_name: file_size_bytes

  ficus_fastq_table:
    id_key: file_id
    data_source:
      file_name: "../src/data/ficus_project_fastq.tsv"
      file_type: tsv      
    data_slots:
      - file_id
      - gold_project_id
      - file_type_description
      - file_size
    append_columns:
      - name: processing_institution
        value: Environmental Molecular Sciences Lab
    rename_slots:
      - old_name: file_size
        new_name: file_size_bytes

  ficus_jgi_emsl:
    id_key: gold_study_id
    data_source:
      file_name: "../src/data/FICUS - JGI-EMSL Proposal - Gold Study - ID mapping and PI.xlsx"
      file_type: excel
    data_slots:
      - emsl_proposal_id
      - gold_study_id
        
  ficus_emsl:
    id_key: dataset_id
    data_source: 
      file_name: "../src/data/EMSL_FICUS_project_process_data_export.xlsx"
      file_type: multi-sheet-excel
    data_slots:
      - experimental_data_type
      - instrument_name
    rename_slots:
      - old_name: experimental_data_type
        new_name: omics_type
      - old_name: dataset_file_size_bytes
        new_name: file_size_bytes
    append_columns:
      - name: processing_institution
        value: Environmental Molecular Sciences Lab